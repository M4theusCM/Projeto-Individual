<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../styles/gearup.css">
    <title>GearUP - Eventos</title>
    <link rel="icon" href="../src/logo.png">
    <link rel="stylesheet" href="../styles/feed.css">
    <script src="../js/sessao.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Chewy&family=Figtree:ital,wght@0,300..900;1,300..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Chewy&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Anton&family=Bebas+Neue&family=Chewy&family=Figtree:ital,wght@0,300..900;1,300..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');
    </style>
</head>

<body onload="validarSessao(), feed()">
    <div class="container-principal">
        <div class="menu-lateral">
            <div class="logo">
                <a href="./home.html">
                    <img src="../src/efeitos/gearup - efeito-claro.png" alt="GEARUP">
                </a>
            </div>
            <div class="area-links">
                <div class="links">
                    <a href="./home.html" >
                        <img src="../src/icones/home-icon.png" class="menu-icons" alt="Home">
                        Pagina inicial
                    </a>
                </div>
                <div class="links">
                    <a href="./eventos.html" >
                        <img src="../src/icones/evento-icon.png" class="menu-icons" alt="Calendario">
                        Eventos
                    </a>
                </div>
                <div class="links">
                    <a href="./jogos.html">
                        <img src="../src/icones/jogo-icon.png" class="menu-icons" alt="controle">
                        Jogos
                    </a>
                </div>
                <div class="links">
                    <a href="./filmes.html" class="selecionado">
                        <img src="../src/icones/filme-icon.png" class="menu-icons" alt="Claclete">
                        Filmes
                    </a>
                </div>
                <div class="links" >
                    <a href="./carros.html">
                        <img src="../src/icones/carro-icon.png" class="menu-icons" alt="Carros">
                        Carros
                    </a>
                </div>
            </div>
            <div class="area-sair">
                <div class="links">
                    <a href="./perfil.html">
                        <img src="" alt="Perfil" id="perfil_img_menu" class="menu-img">
                        Perfil
                    </a>
                </div>
                <div class="links">
                    <button onclick="limparSessao()">
                        <img src="../src/icones/sair-icon.png" alt="Sair" class="menu-img">
                        Sair
                    </button>
                </div>
            </div>
        </div>
        <div class="container container-feed" id="container_feed">

        </div>
    </div>
</body>

</html>

<script>

    function feed() {
        var tipo = 'Filmes'
        fetch(`/poster/buscarFeed/${tipo}`, { cache: 'no-store' }).then(function (response) {
            if (response.ok) {
                response.json().then(function (resposta) {
                    // console.log(JSON.stringify(resposta))
                    exibir(resposta)
                });
            } else {
                console.log('Nenhum Feed encontrado ou erro na api')
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ feed: ${error.message}`)
            })
    }

    function exibir(resposta) {
        // console.log(JSON.stringify(resposta))
        var posters = ''
        var qdtFeeds = resposta.length
        for (var i = 0; i < qdtFeeds; i++) {
            var feedAtual = resposta[i]
            posters += `
                <div class="card card-post">
                    <div class="imgPost">
                        <img src="../src/posters/${feedAtual.imgPoster}" alt="Poster">
                    </div>
                    <div class="infosPost">
                        <div class="criador">
                            <img src="../src/perfils/${feedAtual.imgCriador}" alt="GR">
                            <p>${feedAtual.nickNameCriador}</p>
                        </div>
                        <div class="legendas">
                            <p>${feedAtual.legendaPoster}</p>
                        </div>
                        <div class="estatisticas">
                            <div>
                                <img src="../src/icones/coracao.png" alt="">
                                <p>${feedAtual.qtdCurtida}</p>
                                <span>Curtidas</span>
                            </div>
                            <div>
                                <img src="../src/icones/comentarios.png" alt="">
                                <p>${feedAtual.qtdComentarios}</p>
                                <span>Comentarios</span>
                            </div>
                        </div>
                        <div class="comentarios-area">
                            <div class="comentarios"></div>
                            <div class="comentarios"></div>
                            <p>Ver mais</p>
                        </div>
                    </div>
                </div>
            `
        }
        container_feed.innerHTML = posters 
    }

</script>